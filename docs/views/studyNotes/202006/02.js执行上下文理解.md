---
title: js执行上下文理解
date: 2020-06-10 14:51:00
tags:
 - Javascript
categories: 
 - 技术
---

### js的运行环境

js的运行不是像C++，java等编译语言编译后直接在操作系统上运行，因为它是脚本语言，运行时必须要借助引擎来运行，所以它可以在封装了引擎的环境下运行。而当js运行时，它会有不同的运行环境。
+ Global Code -- js代码开始的默认运行环境
+ Function Code -- 代码执行在js函数中
+ Eval Code -- 使用eval()执行代码

### js的运行过程

+ js的执行过程，可以分为两个重要的时期：预编译期（预解析期）和执行期

+ 预编译期
  - 浏览器的js引擎解析js代码
  - 建立argumnets对象，函数，参数，变量
  - 建立作用域链
  - 确定this的指向
  
+ 执行期
  - 按照从上到下的顺序执行代码
  
### 执行上下文

#### 概念

如何区分不同运行环境，需要引出一个概念，就是执行上下文，它是一个对象，由js的执行引擎创建，具有三个属性：变量对象，作用域链，this指针。

#### 上下文栈
js在执行过程中会有一个上下文栈，上下文栈中存放的是不同的上下文对象（可以理解为不同的js运行环境），比如当js开始执行一个函数，那此时它的运行环境从原来的Global Code变为Function Code
js引擎会创建一个context对象，并将其压入栈中，当这个函数执行完之后，这个对象将会弹出。   
故而，当前的执行代码的context对象总是出现在栈顶。
